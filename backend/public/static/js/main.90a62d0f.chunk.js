(this.webpackJsonpfullstack_mipt_app=this.webpackJsonpfullstack_mipt_app||[]).push([[0],{154:function(e,t,a){},155:function(e,t,a){},156:function(e,t,a){},157:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(29),s=a.n(i),o=(a(74),a(23)),c=a(20),l=a(9),u=a(10),m=a(13),h=a(12),d=a(14),g=(a(40),a(164)),f=a(165),p=a(68),v=a(166),y=(a(75),"http://localhost:8000"),E="".concat(y,"/api"),b="".concat(E,"/maps"),w="".concat(E,"/auth"),k="".concat(w,"/token/"),j="".concat(w,"/register/"),O="".concat(w,"/current_user/"),N=function(e){var t,a=e.title,n=e.description,i=e.thumbnail,s=e.id,c=e.url;return r.a.createElement(o.b,{to:(t=c,"maps/"+t)},r.a.createElement("div",{className:"slider-item",id:s,style:{background:"url(".concat(y).concat(i,") center center no-repeat")}},r.a.createElement("div",{className:"shadow"},r.a.createElement("p",{className:"title"},a),r.a.createElement("p",{className:"description"},n))))},_=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).next=function(){if(!a.state.animating){var e=a.state.activeIndex===a.state.items.length-1?0:a.state.activeIndex+1;a.setState({activeIndex:e})}},a.previous=function(){if(!a.state.animating){var e=0===a.state.activeIndex?a.state.items.length-1:a.state.activeIndex-1;a.setState({activeIndex:e})}},a.goToIndex=function(e){a.state.animating||a.setState({activeIndex:e})},a.state={activeIndex:0,animating:!1,items:[]},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(b,"/")).then((function(e){return e.json()})).then((function(t){e.setState({items:t})})).catch((function(e){return console.log("Send failed",e)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("style",null,".custom-tag {\n                          max-width: 100%;\n                          height: 274px;\n                          background: black;\n                    }"),r.a.createElement(g.a,{activeIndex:this.state.activeIndex,next:this.next,previous:this.previous},r.a.createElement(f.a,{items:this.state.items,activeIndex:this.state.activeIndex,onClickHandler:this.goToIndex}),this.state.items.map((function(t){return r.a.createElement(p.a,{className:"custom-tag",tag:"div",key:t.id,onExiting:function(){return e.setState({animating:!0})},onExited:function(){return e.setState({animating:!1})}},N(t))})),r.a.createElement(v.a,{direction:"prev",directionText:"Previous",onClickHandler:this.previous}),r.a.createElement(v.a,{direction:"next",directionText:"Next",onClickHandler:this.next})))}}]),t}(n.Component),S=(a(87),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"content"},r.a.createElement("main",null,r.a.createElement("article",null,r.a.createElement("div",{className:"full-dark-logo"},"Gaze"),r.a.createElement("h2",null,"\u041e \u043f\u0440\u043e\u0435\u043a\u0442\u0435"),r.a.createElement("p",null,"\u042d\u0442\u043e \u043f\u0440\u043e\u0435\u043a\u0442 \u043f\u043e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0443 \u0438\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u043a\u0430\u0440\u0442. \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043f\u043e\u043a\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430 \u043b\u0438\u0448\u044c \u0432\u0435\u0441\u044c\u043c\u0430 \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u043d\u043e\u043c\u0443 \u043a\u0440\u0443\u0433\u0443 \u043b\u0438\u0446. \u041d\u0430 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u043b\u0438\u0448\u044c \u0442\u0440\u0438 (\u0441\u043c. \u0413\u0430\u043b\u0435\u0440\u0435\u044e), \u043d\u043e \u043c\u044b \u0443\u0431\u0435\u0436\u0434\u0435\u043d\u044b, \u0447\u0442\u043e \u043e\u043d\u0438 \u0441\u0442\u043e\u044f\u0442 \u0432\u0430\u0448\u0435\u0433\u043e \u0432\u043d\u0438\u043c\u0430\u043d\u0438\u044f. \u0416\u0435\u043b\u0430\u0435\u043c \u0432\u0430\u043c \u043f\u0440\u0438\u044f\u0442\u043d\u043e \u0438 \u0441 \u043f\u043e\u043b\u044c\u0437\u043e\u0439 \u043f\u0440\u043e\u0432\u0435\u0441\u0442\u0438 \u0432\u0440\u0435\u043c\u044f ;)"),r.a.createElement("h2",null,"\u0413\u0430\u043b\u0435\u0440\u0435\u044f"),r.a.createElement("p",null,"\u041d\u0438\u0436\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043f\u0440\u0438\u043c\u0435\u0440\u043e\u0432 \u0438\u043d\u0442\u0435\u0440\u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0445 \u043a\u0430\u0440\u0442. \u0412 \u0431\u0443\u0434\u0443\u0449\u0435\u043c \u0435\u0449\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u043c\u043e\u0436\u043d\u043e \u0431\u0443\u0434\u0435\u0442 \u043d\u0430\u0439\u0442\u0438 \u043d\u0430 \u043e\u0442\u0434\u0435\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0435."),r.a.createElement("div",{className:"slider-wrapper"},r.a.createElement(_,null)),r.a.createElement("h2",null,"\u0410\u0432\u0442\u043e\u0440\u044b"),r.a.createElement("p",null,"\u0414\u0432\u0430 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430 \u041c\u0424\u0422\u0418. \u0421\u043c. \u043d\u0430 GitHub ",r.a.createElement("a",{href:"https://github.com/TulaShlyosberg"},"TulaShloysberg")," \u0438 ",r.a.createElement("a",{href:"https://github.com/Mr-Geekman/"},"mrgeekman"),".")))))}}]),t}(n.Component)),x=(a(88),function(e){return r.a.createElement("div",{className:"slide-wrapper"},N(e))}),P=(a(89),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={items:[]},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat(b,"/")).then((function(e){return e.json()})).then((function(t){console.log(t),e.setState({items:t})})).catch((function(e){return console.log("Send failed",e)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"maps-table"},this.state.items.map((function(e){return x(e)})))}}]),t}(n.Component)),C=(a(90),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"content-gallery"},r.a.createElement(P,null))}}]),t}(n.Component)),T=a(24),B=(a(92),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={ready:!1},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.setState({ready:!0})}},{key:"render",value:function(){return this.state.ready?r.a.createElement("div",{className:"content-404",style:{height:this.props.height}},r.a.createElement("div",{className:"text-404"},r.a.createElement("span",null,"\u041f\u043e\u0445\u043e\u0436\u0435,"),r.a.createElement("br",null),r.a.createElement("span",null,"\u0447\u0442\u043e \u0432\u044b \u0437\u0430\u0431\u0440\u0435\u043b\u0438 \u043d\u0435 \u0442\u0443\u0434\u0430,"),r.a.createElement("br",null),r.a.createElement("span",null,"\u0442\u0430\u043a\u043e\u0439 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"),r.a.createElement("br",null),r.a.createElement("span",null,"\u0421\u043e\u0432\u0435\u0442\u0443\u0435\u043c \u0432\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430 ",r.a.createElement(o.b,{to:"/"},"\u0433\u043b\u0430\u0432\u043d\u0443\u044e")))):"404"}}]),t}(n.Component)),L=Object(T.b)((function(e){return{height:e.height}}),(function(e){}))(B),H=a(67),D=a(18),M=a(26),I=a(48);function W(e,t){var a="m 0, 0 q ";return a+=e.radius+","+t*e.radius,a+=" "+2*e.radius+",0"}function z(){document.getElementsByTagName("body")[0].style.cursor="pointer"}function V(){document.getElementsByTagName("body")[0].style.cursor="default"}var F=function(e){return r.a.createElement(M.Group,{x:e.x_coordinate,y:e.y_coordinate,onClick:e.handler,opacity:.8*e.opacity,onMouseEnter:z,onMouseLeave:V},r.a.createElement(I.Spring,{reset:!0,from:{fill:"black"},to:{fill:"gray"}},(function(t){return r.a.createElement(I.animated.Circle,{fill:t.fill,x:0,y:0,radius:e.radius})})),r.a.createElement(M.Path,{x:-e.radius,y:0,data:W(e,1),stroke:"white",width:e.radius/4}),r.a.createElement(M.Path,{x:-e.radius,y:0,data:W(e,-1),stroke:"white",width:e.radius/4}),r.a.createElement(M.Circle,{x:0,y:0,radius:e.radius/3,fill:"white"}))};a(154);var G=function(e){function t(e){return Object(l.a)(this,t),Object(m.a)(this,Object(h.a)(t).call(this,e))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e="100vw";return 1===this.props.show&&(e="60vw"),this.props.source?r.a.createElement("div",{className:"information-panel",style:{"margin-left":e,height:this.props.height}},this.props.source.map((function(e){return function(e){switch(e.type){case"h1":return r.a.createElement("h1",null,e.content);case"h3":return r.a.createElement("h3",null,e.content);case"img":return r.a.createElement("div",null,r.a.createElement("img",{className:"article-img",src:y+e.src,draggable:"false"}),r.a.createElement("div",{className:"article-img-caption"},r.a.createElement("i",null,e.content)));case"paragraph":return r.a.createElement("p",null,r.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.content}}));default:return null}}(e)}))):r.a.createElement("div",{className:"information-panel",style:{"margin-left":e,height:this.props.height}})}}]),t}(n.Component),X=(a(155),function(e){var t=e.height;return r.a.createElement("div",{className:"map-loader-container",style:{width:window.innerWidth,height:t}},r.a.createElement("div",{className:"loading-text"},r.a.createElement("span",{className:"loading-text-words"},"\u0417"),r.a.createElement("span",{className:"loading-text-words"},"\u0410"),r.a.createElement("span",{className:"loading-text-words"},"\u0413"),r.a.createElement("span",{className:"loading-text-words"},"\u0420"),r.a.createElement("span",{className:"loading-text-words"},"\u0423"),r.a.createElement("span",{className:"loading-text-words"},"\u0417"),r.a.createElement("span",{className:"loading-text-words"},"\u041a"),r.a.createElement("span",{className:"loading-text-words"},"\u0410")))}),Y=(a(156),function(e){return r.a.createElement("div",{className:"setting-panel"},r.a.createElement("div",{className:"menu-button"},r.a.createElement("div",{className:"line"}),r.a.createElement("div",{className:"line"}),r.a.createElement("div",{className:"line"})),r.a.createElement("div",{className:"eye",title:"\u0421\u043a\u0440\u044b\u0442\u044c/\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043c\u0435\u0442\u043a\u0438",onClick:function(t){var a=t.currentTarget,n=a.children[0],r=a.children[1];if(e.changeVisability())return n.style.borderColor="black transparent transparent transparent",a.style.color="black",void(r.style.height="40px");a.style.color="white",n.style.borderColor="white transparent transparent transparent",r.style.height="0px"}},"\u2022",r.a.createElement("div",{className:"brow"}),r.a.createElement("div",{className:"traverser"})),r.a.createElement("div",{className:"speaker-sign",onClick:function(){var t=document.querySelector(".speaker-sign > .traverser");e.changePlaying()?t.style.height="40px":t.style.height="0px"}},r.a.createElement("div",{className:"traverser"})),r.a.createElement("div",{className:"inform-sign",title:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043a\u0430\u0440\u0442\u044b",onClick:e.showSummary},"i"))});var J=function(){function e(t,a){Object(l.a)(this,e),this.audio_map=function(e){var t=e.split(",");for(var a in t)t[a]=t[a].trim().split(" ");return t=t[0].map((function(e,a){return t.map((function(e){return e[a]}))}))}(t),this.tracks=function(e){var t={};return e.forEach((function(e){t[e.id]=y+e.file})),t}(a),this.player=new Audio,this.timer=null,this.player.loop=!0,this.i=-1,this.j=-1,this.willPlay=0,this.currentPlay=0,this.stopped=0}return Object(u.a)(e,[{key:"stop",value:function(){clearTimeout(this.timer),this.player.pause(),this.player.currentTime=0,this.willPlay=0,this.currentPlay=0,this.i=-1,this.j=-1,this.stopped=1}},{key:"unstop",value:function(){this.stopped=0}},{key:"map_leaved",value:function(){clearTimeout(this.timer),this.willPlay=this.currentPlay}},{key:"change",value:function(e,t){var a=this;this.stopped||-1!=this.i&&this.audio_map[e][t]==this.audio_map[this.i][this.j]||(this.i=e,this.j=t,this.willPlay=this.audio_map[e][t],clearTimeout(this.timer),this.willPlay!=this.currentPlay&&(this.timer=setTimeout((function(n){if(a.currentPlay=n,a.player.pause(),"_"!=a.audio_map[e][t]){a.player.src=a.tracks[n],a.player.currentTime=0;var r=a.player.play();void 0!=r&&r.catch((function(e){console.log(e.message)}))}}),2e3,this.audio_map[e][t])))}}]),e}(),q=(a(157),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleLoad=function(){a.setState({loaded:!0})},a.handleWindowLoad=function(e){e.preventDefault();var t=window.innerHeight-document.getElementsByTagName("header")[0].clientHeight-document.getElementsByTagName("footer")[0].clientHeight;a.setState({height:t})},a.changeMarkersVisability=function(){return a.setState({markersView:1-a.state.markersView}),a.state.markersView},a.showSummary=function(){a.setState({inform:a.state.imageData.map_description_items,markersOpacity:0})},a.bound_function=function(e){var t=window.innerWidth,n=a.state.height,r=a.state.imageData.height*a.state.stageScale,i=a.state.imageData.width*a.state.stageScale,s=e.x,o=e.y;return r<n?o=n/2-r/2:(e.y>0&&(o=0),e.y+r<n&&(o=n-r)),i<t?s=(t-i)/2:(e.x>0&&(s=0),e.x+i<t&&(s=t-i)),{x:s,y:o}},a.handleWheel=function(e){e.evt.preventDefault();var t=e.target.getStage(),n=t.scaleX(),r=t.getPointerPosition().x/n-t.x()/n,i=t.getPointerPosition().y/n-t.y()/n,s=e.evt.deltaY>0?.95*n:n/.95;if(!(s<a.state.minScaleValue)){t.scale({x:s,y:s}),a.setState({stageScale:s,stageX:-(r-t.getPointerPosition().x/s)*s,stageY:-(i-t.getPointerPosition().y/s)*s});var o=t.getChildren()[0];o.absolutePosition(a.bound_function(o.absolutePosition()))}},a.handleClick=function(e){return function(t){t.evt.preventDefault(),document.querySelector(".information-panel").scrollTop=0,a.setState({inform:a.state.imageData.marks[e].mark_description_items,markersOpacity:0})}},a.handleBack=function(e){a.setState({markersOpacity:1})},a.handleMove=function(e){e.evt.preventDefault();var t=e.target.getStage(),n=t.getChildren()[0],r=t.getPointerPosition().x-n.absolutePosition().x,i=t.getPointerPosition().y-n.absolutePosition().y,s=a.state.imageData.height*a.state.stageScale,o=a.state.imageData.width*a.state.stageScale;a.backgroundPlayer.change(Math.trunc(r/o*a.horizontal_parts_count),Math.trunc(i/s*a.vertical_parts_count)),a.soundEffectsPlayer&&a.soundEffectsPlayer.change(Math.trunc(r/o*a.horizontal_parts_effects_count),Math.trunc(i/s*a.vertical_parts_effects_count))},a.handleLeave=function(e){e.evt.preventDefault(),a.backgroundPlayer.map_leaved(),a.soundEffectsPlayer&&a.soundEffectsPlayer.map_leaved()},a.state=Object(H.a)({},a.props.match.params,{found:!1,loaded:!1,stageY:1,height:0,imageData:{},image:{},markersOpacity:1,markersView:1,inform:null,stageScale:1,stageX:1,minScaleValue:0,interacted:0}),a.layer=r.a.createRef(),a.vertical_parts_count=0,a.horizontal_parts_count=0,a.handleLoad=a.handleLoad.bind(Object(D.a)(a)),a.handleWindowLoad=a.handleWindowLoad.bind(Object(D.a)(a)),a.bound_function=a.bound_function.bind(Object(D.a)(a)),a.handleMove=a.handleMove.bind(Object(D.a)(a)),a.changeMarkersVisability=a.changeMarkersVisability.bind(Object(D.a)(a)),a.showSummary=a.showSummary.bind(Object(D.a)(a)),a.handleLeave=a.handleLeave.bind(Object(D.a)(a)),a.processLayerPosition=function(e){e&&e.absolutePosition(a.bound_function(e.absolutePosition()))},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t="".concat(b,"/").concat(this.state.name,"/");if(fetch(t).then((function(t){if(404===t.status)e.setState({found:!1,loaded:!0});else if(200===t.status)return t.json()})).then((function(t){if(e.setState({imageData:t}),e.state.imageData){var a=Math.min(window.innerWidth/e.state.imageData.width,window.innerHeight/e.state.imageData.height*.8);e.setState({stageScale:a,minScaleValue:a});var n=(window.innerWidth-e.state.imageData.width*e.state.stageScale)/2;e.setState({stageX:n});var r=new window.Image;r.src=y+e.state.imageData.image,r.addEventListener("load",e.handleLoad),e.setState({image:r,found:!0}),e.backgroundPlayer=new J(t.audio_map,t.tracks),e.backgroundPlayer.player.volume=.5;var i=t.audio_map.split(",");e.vertical_parts_count=i.length,e.horizontal_parts_count=i[0].trim().split(" ").length,0!==t.effects.length&&(e.soundEffectsPlayer=new J(t.effects_map,t.effects),i=t.effects_map.split(","),e.vertical_parts_effects_count=i.length,e.horizontal_parts_effects_count=i[0].trim().split(" ").length)}})).catch((function(e){return console.log("Send failed",e)})),document.getElementsByTagName("footer")&&(document.getElementsByTagName("footer")[0].style.display="none"),document.getElementsByTagName("footer")&&document.getElementsByTagName("header")){var a=window.innerHeight-document.getElementsByTagName("header")[0].clientHeight-document.getElementsByTagName("footer")[0].clientHeight;this.setState({height:a})}else window.addEventListener("load",this.handleWindowLoad)}},{key:"componentWillUnmount",value:function(){document.getElementsByTagName("footer")[0].style.display="block",this.backgroundPlayer.stop(),delete this.backgroundPlayer,this.soundEffectsPlayer&&(this.soundEffectsPlayer.stop(),delete this.soundEffectsPlayer)}},{key:"getMarginLeft",value:function(){return 0===this.state.markersOpacity?"15px":"-100px"}},{key:"render",value:function(){var e=this;if(!this.state.loaded)return r.a.createElement(X,{height:this.state.height});if(!this.state.found||!this.state.imageData)return r.a.createElement(B,null);if(!this.state.interacted)return r.a.createElement("div",{className:"interaction-div",style:{height:this.state.height},onClick:function(t){e.setState({interacted:1})}},r.a.createElement("div",null,"\u041d\u0430\u0436\u043c\u0438\u0442\u0435, \u0447\u0442\u043e\u0431\u044b \u043d\u0430\u0447\u0430\u0442\u044c"));var t=window.innerWidth,a=this.state.height,n=null;return this.state.markersView&&(n=this.state.imageData.marks.map((function(t,a){return F(Object.assign(t,{handler:e.handleClick(a),opacity:e.state.markersOpacity}))}))),r.a.createElement("main",null,r.a.createElement(Y,{changeVisability:this.changeMarkersVisability,showSummary:this.showSummary,changePlaying:function(){return e.backgroundPlayer.stopped?(e.backgroundPlayer.unstop(),void(e.soundEffectsPlayer&&e.soundEffectsPlayer.unstop())):(e.backgroundPlayer.stop(),e.soundEffectsPlayer&&e.soundEffectsPlayer.stop(),e.backgroundPlayer.stopped)}}),r.a.createElement("div",{className:"back-button",onClick:this.handleBack,style:{"margin-left":this.getMarginLeft()}}),r.a.createElement(G,{source:this.state.inform,show:1-this.state.markersOpacity,height:a}),r.a.createElement(M.Stage,{width:t,height:this.state.height,onWheel:this.handleWheel,scaleX:this.state.stageScale,scaleY:this.state.stageScale,x:this.state.stageX,y:this.state.stageY},r.a.createElement(M.Layer,{draggable:!0,dragBoundFunc:this.bound_function,onMouseMove:this.handleMove,onMouseLeave:this.handleLeave,ref:this.processLayerPosition},r.a.createElement(M.Image,{image:this.state.image}),n)))}}]),t}(n.Component));function A(e){return{type:"user_data",user_data:{user_name:e?e.username:void 0,user_email:e?e.email:void 0,user_profile:e?e.profile:void 0}}}var R=a(27),U=a.n(R),Z=a(30),$=a(33),K=a(167),Q=a(168),ee=a(169),te=a(170),ae=a(171),ne=(a(159),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleLoad=function(e){var t=window.innerHeight-document.getElementsByTagName("header")[0].clientHeight-document.getElementsByTagName("footer")[0].clientHeight;console.log(t),a.setState({height:t})},a.handleChange=function(){var e=Object($.a)(U.a.mark((function e(t){var n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target,a.setState(Object(Z.a)({},n.name,n.value));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.submitForm=function(e){e.preventDefault();var t={username:a.state.login,password:a.state.password};a.setState({password:"",error:""}),t.username?t.password?fetch(k,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.ok?e.json():Promise.reject(e)})).then((function(e){localStorage.setItem("token",e.token),a.props.enter(e.user)})).catch((function(e){e.json().then((function(e){for(var t in Object.keys(e)){var n=e[Object.keys(e)[t]];for(var r in n)a.setState({error:n[r]})}}))})):a.setState({error:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c."}):a.setState({error:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f."})},a.state={height:0,login:"",password:"",error:""},a.handleLoad=a.handleLoad.bind(Object(D.a)(a)),a.submitForm=a.submitForm.bind(Object(D.a)(a)),a.handleChange=a.handleChange.bind(Object(D.a)(a)),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){if(document.getElementsByTagName("header")&&document.getElementsByTagName("footer")){var e=window.innerHeight-document.getElementsByTagName("header")[0].clientHeight-document.getElementsByTagName("footer")[0].clientHeight;this.setState({height:e})}else window.addEventListener("load",this.handleLoad)}},{key:"render",value:function(){var e="";return this.state.error&&(e=r.a.createElement(K.a,{style:{color:"red"}},this.state.error)),r.a.createElement("main",null,r.a.createElement("div",{className:"content-auth",style:{height:this.state.height}},r.a.createElement("div",{className:"form-wrapper"},r.a.createElement(Q.a,{onSubmit:this.submitForm,style:{"font-size":"10pt"}},e,r.a.createElement(ee.a,{col:!0},r.a.createElement(K.a,{for:"username"},"\u041b\u043e\u0433\u0438\u043d"),r.a.createElement(te.a,{type:"text",name:"login",id:"username",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d",value:this.state.login,onChange:this.handleChange})),r.a.createElement(ee.a,{col:!0},r.a.createElement(K.a,{for:"userPassword"},"Password"),r.a.createElement(te.a,{type:"password",name:"password",id:"userPassword",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",value:this.state.password,onChange:this.handleChange})),r.a.createElement(ae.a,null,"\u0412\u043e\u0439\u0442\u0438")))))}}]),t}(n.Component)),re=Object(T.b)((function(e){return{user_data:e.user_data}}),(function(e){return{enter:function(t){e(A(t))}}}))(ne),ie=(a(160),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleLoad=function(e){var t=window.innerHeight-document.getElementsByTagName("header")[0].clientHeight-document.getElementsByTagName("footer")[0].clientHeight;console.log(t),a.setState({height:t})},a.handleChange=function(){var e=Object($.a)(U.a.mark((function e(t){var n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target,a.setState(Object(Z.a)({},n.name,n.value));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.submitForm=function(){var e=Object($.a)(U.a.mark((function e(t){var n;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n={username:a.state.login,email:a.state.email,password:a.state.password},a.setState({password:"",error:""}),n.username){e.next=6;break}return a.setState({error:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f."}),e.abrupt("return");case 6:if(n.password){e.next=9;break}return a.setState({error:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c."}),e.abrupt("return");case 9:if(n.email){e.next=12;break}return a.setState({error:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email."}),e.abrupt("return");case 12:fetch(j,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.ok?e.json():Promise.reject(e)})).then((function(e){localStorage.setItem("token",e.token),a.props.enter(e.user)})).catch((function(e){e.json().then((function(e){for(var t in Object.keys(e)){var n=e[Object.keys(e)[t]];for(var r in n)a.setState({error:n[r]})}}))}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={height:0,login:"",password:"",email:"",error:""},a.handleLoad=a.handleLoad.bind(Object(D.a)(a)),a.submitForm=a.submitForm.bind(Object(D.a)(a)),a.handleChange=a.handleChange.bind(Object(D.a)(a)),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){if(document.getElementsByTagName("header")&&document.getElementsByTagName("footer")){var e=window.innerHeight-document.getElementsByTagName("header")[0].clientHeight-document.getElementsByTagName("footer")[0].clientHeight;this.setState({height:e})}else window.addEventListener("load",this.handleLoad)}},{key:"render",value:function(){var e="";return this.state.error&&(e=r.a.createElement(K.a,{style:{color:"red"}},this.state.error)),r.a.createElement("main",null,r.a.createElement("div",{className:"content-auth",style:{height:this.state.height}},r.a.createElement("div",{className:"form-wrapper"},r.a.createElement(Q.a,{onSubmit:this.submitForm,style:{"font-size":"10pt"}},e,r.a.createElement(ee.a,null,r.a.createElement(K.a,{for:"username"},"\u041b\u043e\u0433\u0438\u043d"),r.a.createElement(te.a,{type:"text",name:"login",id:"username",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043b\u043e\u0433\u0438\u043d",value:this.state.login,onChange:this.handleChange,size:"10pt"})),r.a.createElement(ee.a,null,r.a.createElement(K.a,{for:"userEmail"},"Email"),r.a.createElement(te.a,{type:"email",name:"email",id:"userEmail",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 email",value:this.state.email,onChange:this.handleChange})),r.a.createElement(ee.a,null,r.a.createElement(K.a,{for:"userPassword"},"Password"),r.a.createElement(te.a,{type:"password",name:"password",id:"userPassword",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",value:this.state.password,onChange:this.handleChange})),r.a.createElement(ae.a,null,"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))))}}]),t}(n.Component)),se=Object(T.b)((function(e){return{user_data:e.user_data}}),(function(e){return{enter:function(t){e(A(t))}}}))(ie),oe=Object(c.f)((function(){return r.a.createElement(c.c,null,r.a.createElement(c.a,{exact:!0,path:"/",component:S}),r.a.createElement(c.a,{exact:!0,path:"/gallery",component:C}),r.a.createElement(c.a,{path:"/maps/:name",component:q}),r.a.createElement(c.a,{path:"/authorization",component:re}),r.a.createElement(c.a,{path:"/registration",component:se}),r.a.createElement(c.a,{path:"*",component:L}))})),ce=(a(161),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleWindow=function(e){e.preventDefault();var t=window.innerHeight-document.getElementsByTagName("header")[0].clientHeight-document.getElementsByTagName("footer")[0].clientHeight;console.log(t),a.props.setHeight(t)},a.state={logged_in:!!localStorage.getItem("token"),username:""},a.handleWindow=a.handleWindow.bind(Object(D.a)(a)),a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.state.logged_in&&fetch(O,{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}).then((function(e){var t=e.json();return e.ok,t})).then((function(t){e.setState({username:t.username}),e.props.enter(t)})),document.getElementsByTagName("footer")&&document.getElementsByTagName("header")){var t=window.innerHeight-document.getElementsByTagName("header")[0].clientHeight-document.getElementsByTagName("footer")[0].clientHeight;this.props.setHeight(t)}else window.addEventListener("load",this.handleWindow);window.addEventListener("resize",this.handleWindow)}},{key:"render",value:function(){var e=this,t=null;return t=this.props.user_name?r.a.createElement("div",{className:"user-div"},r.a.createElement("span",null,"\u0412\u044b: ",this.props.user_name),r.a.createElement("div",{className:"escape button",onClick:function(t){t.preventDefault(),e.props.onEscapeClick()}},"\u0412\u044b\u0439\u0442\u0438")):r.a.createElement("div",{className:"user-div"},r.a.createElement("div",{className:"enter button"},r.a.createElement(o.b,{to:"/authorization"},r.a.createElement("span",{className:"button-text"},"\u0412\u043e\u0439\u0442\u0438"))),r.a.createElement("div",{className:"register button"},r.a.createElement(o.b,{to:"/registration"},r.a.createElement("span",{className:"button-text"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))),r.a.createElement("header",null,r.a.createElement("div",{className:"header-right"},r.a.createElement("nav",{className:"primary-nav"},r.a.createElement("ul",null,r.a.createElement("li",{className:"logo"},r.a.createElement(o.b,{to:"/"},r.a.createElement("span",{className:"g-logo"},"G"),r.a.createElement("span",{className:"z-logo"},"Z"))),r.a.createElement("li",{className:"typical"},r.a.createElement(o.b,{to:"/gallery"},"\u0413\u0430\u043b\u0435\u0440\u0435\u044f"))))),r.a.createElement("div",{className:"header-left"},t))}}]),t}(n.Component)),le=Object(T.b)((function(e){return{user_name:e.user_data.user_name}}),(function(e){return{enter:function(t){e(A(t))},onEscapeClick:function(){localStorage.removeItem("token"),e(A(void 0))},setHeight:function(t){e(function(e){return{type:"change_height",height:e}}(t))}}}))(ce),ue=(a(162),function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("footer",null,r.a.createElement("p",null,"\xa9 Gaze.com 2019-2020"))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var me=a(36),he={user_data:{user_name:void 0,user_email:void 0,user_profile:void 0},height:0};var de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"user_data":return Object.assign({},e,{user_data:t.user_data});case"change_height":return Object.assign({},e,{height:t.height});default:return e}},ge=Object(me.b)(de);s.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,null,r.a.createElement(T.a,{store:ge},r.a.createElement(le,null),r.a.createElement(oe,null),r.a.createElement(ue,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},69:function(e,t,a){e.exports=a(163)},74:function(e,t,a){},75:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},92:function(e,t,a){}},[[69,1,2]]]);
//# sourceMappingURL=main.90a62d0f.chunk.js.map